[
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-10-07 15:47:27.983340",
  "module": null,
  "name": "Trigger Mail For Supplier When Registration Save",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Supplier Registration",
  "script": "\n\n\n\n\n\n\n\n\nif doc.email:\n    # Dynamic site URL\n    site_url = frappe.utils.get_url()\n    \n    # Pass supplier_name, supplier_group, and email as query parameters\n    supplier_name = doc.supplier_name.replace(\" \", \"%20\")  # URL encode spaces\n    supplier_group = doc.supplier_group.replace(\" \", \"%20\") if doc.supplier_group else \"\"\n    email = doc.email\n    \n    form_link = f\"{site_url}/supplier-registration/new?supplier_name={supplier_name}&supplier_group={supplier_group}&email={email}\"\n    \n    # Compose email\n    subject = \"Complete Your Supplier Registration\"\n    message = f\"\"\"\n    Dear {doc.supplier_name},<br><br>\n    Thank you for registering as a supplier.<br>\n    Please complete your registration by clicking the link below:<br>\n    <a href=\"{form_link}\">Open Supplier Registration Form</a><br><br>\n    Best regards,<br>\n    Your Company\n    \"\"\"\n    \n    frappe.sendmail(\n        recipients=[doc.email],\n        subject=subject,\n        message=message,\n        reference_doctype=doc.doctype,\n        reference_name=doc.name\n    )\n\n\n\n\n\n\n\n\n",
  "script_type": "DocType Event"
 }
]